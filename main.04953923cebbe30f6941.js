"use strict";(self.webpackChunkaudio_accelerator=self.webpackChunkaudio_accelerator||[]).push([[179],{596:()=>{var t,e,n,a,o,r,s,l,u,i=!1,c=!1,p=()=>{o||(o=new AudioContext)},d=e=>{t=e},h=t=>{e=t},x=t=>{n=t},f=()=>{m(),i&&s&&((r=o.createBufferSource()).buffer=s,r.loop=!0,r.connect(o.destination),r.start(),c=!0,C())},m=()=>{c&&r&&(r.disconnect(o.destination),r.stop(),r=null,c=!1,g())},y=(t,...e)=>(console.log(t,...e),t),k=t=>{if(!t.ok)throw console.log(t),new w("NotOkFetchError",{response:t});return t},v=t=>o.decodeAudioData(t),C=()=>{u=performance.now(),b()},g=()=>{clearTimeout(l)},b=()=>{var o=performance.now()-u;"linear"==t?r.playbackRate.value=e+n*(o/1e3):"exponential"==t&&(r.playbackRate.value=e*n**(o/1e3)),a(r.playbackRate.value),l=setTimeout(b,0)};class w extends Error{constructor(t,e={}){super(JSON.stringify(e)),this.name=t,Object.assign(this,e)}}var A=t=>document.querySelector(t),N=!1;A(".url-load").onclick=()=>{var t;p(),A(".status").textContent="Loading...",t=A(".url").value,i=!1,fetch(t).then(y).then(k).then((t=>t.arrayBuffer())).then(v).then((t=>{i=!0,s=t})).then((()=>{N?(f(),A(".status").textContent="Playing."):A(".status").textContent="Loaded."})).catch((t=>{throw A(".status").textContent="Error!",t}))},A(".file-load").onclick=()=>{var t;p(),A(".status").textContent="Loading...",t=A(".file").files[0],i=!1,(t=>new Promise(((e,n)=>{if(!t)return void n(new w("No file",{}));const a=new FileReader;a.addEventListener("load",(()=>{e(a.result)})),a.addEventListener("error",(t=>{console.log(t),n(new w("Error reading file",{e:t}))})),a.readAsArrayBuffer(t)})))(t).then(y).then(v).then((t=>{i=!0,s=t})).then((()=>{N?(f(),A(".status").textContent="Playing."):A(".status").textContent="Loaded."})).catch((t=>{throw A(".status").textContent="Error!",t}))},A(".play-stop").onclick=()=>{p(),N?(N=!1,A(".play-stop").textContent="Play",c&&(m(),A(".status").textContent="Stopped.",A(".playback-rate").textContent="")):(N=!0,A(".play-stop").textContent="Stop",i&&(f(),A(".status").textContent="Playing."))},A(".type-linear").checked&&d("linear"),A(".type-linear").onclick=()=>{d("linear")},A(".type-exponential").checked&&d("exponential"),A(".type-exponential").onclick=()=>{d("exponential")},x(A(".change-amount").valueAsNumber),A(".change-amount").oninput=()=>{isFinite(A(".change-amount").valueAsNumber)&&x(A(".change-amount").valueAsNumber)},h(A(".start-amount").valueAsNumber),A(".start-amount").oninput=()=>{isFinite(A(".start-amount").valueAsNumber)&&h(A(".start-amount").valueAsNumber)},a=t=>{A(".playback-rate").textContent=t.toFixed(2).toString()+"x"}}},t=>{t(t.s=596)}]);